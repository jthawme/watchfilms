import{s as Pe,e as _,c as v,b as C,f as c,j as u,w as re,l as y,x as B,N as qe,q as Re,y as ze,z as Me,A as Ge,a as N,t as J,G as Le,h as I,d as Y,D as G,m,n as oe,r as We,o as Te,C as He,k as ie,E as ve}from"../chunks/scheduler.vwrL6P9E.js";import{S as Oe,i as Ae,a as T,h as he,t as P,e as _e,c as Z,b as x,m as ee,d as te}from"../chunks/index.kO2rGTCX.js";import{g as Je}from"../chunks/globals.0cDDIVm6.js";import{g as ye}from"../chunks/entry.ZZZaYNO6.js";import{p as Ye}from"../chunks/stores.UnOZXRw9.js";import{b as Ke,a as Fe,c as Ne,d as Q}from"../chunks/utils.IImh6JCv.js";import{F as Qe}from"../chunks/FilmContent.3g17I-cI.js";import{P as Be}from"../chunks/Pill.ToKQcYPl.js";import{s as X}from"../chunks/journey.NYZhiPzo.js";import{s as me}from"../chunks/messages.RVm4dX2E.js";function Ie(n){let e;const s=n[5].default,t=Re(s,n,n[4],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a&16)&&ze(t,s,l,l[4],e?Ge(s,l[4],a,null):Me(l[4]),null)},i(l){e||(T(t,l),e=!0)},o(l){P(t,l),e=!1},d(l){t&&t.d(l)}}}function Xe(n){let e,s,t,l,a=n[1]&&Ie(n);return{c(){e=_("div"),a&&a.c(),this.h()},l(r){e=v(r,"DIV",{class:!0});var i=C(e);a&&a.l(i),i.forEach(c),this.h()},h(){u(e,"class","overlay svelte-1t52qv7"),re(e,"show",n[0])},m(r,i){y(r,e,i),a&&a.m(e,null),s=!0,t||(l=B(e,"transitionend",n[2]),t=!0)},p(r,[i]){r[1]?a?(a.p(r,i),i&2&&T(a,1)):(a=Ie(r),a.c(),T(a,1),a.m(e,null)):a&&(he(),P(a,1,1,()=>{a=null}),_e()),(!s||i&1)&&re(e,"show",r[0])},i(r){s||(T(a),s=!0)},o(r){P(a),s=!1},d(r){r&&c(e),a&&a.d(),t=!1,l()}}}function Ze(n,e,s){let{$$slots:t={},$$scope:l}=e,{show:a=!1}=e;const r=qe();let i=null,b=!1;function d(){a||s(1,b=!1)}return n.$$set=f=>{"show"in f&&s(0,a=f.show),"$$scope"in f&&s(4,l=f.$$scope)},n.$$.update=()=>{n.$$.dirty&9&&(a?(s(1,b=!0),s(3,i=Ke(()=>{r("close")}))):i&&(i(),s(3,i=null)))},[a,b,d,i,l,t]}class je extends Oe{constructor(e){super(),Ae(this,e,Ze,Xe,Pe,{show:0})}}const{document:pe}=Je;function xe(n){let e,s,t=n[0].overview+"",l,a,r,i="Close",b,d;return{c(){e=_("div"),s=_("p"),l=J(t),a=N(),r=_("button"),r.textContent=i,this.h()},l(f){e=v(f,"DIV",{class:!0});var p=C(e);s=v(p,"P",{class:!0});var k=C(s);l=Y(k,t),k.forEach(c),a=I(p),r=v(p,"BUTTON",{class:!0,"data-svelte-h":!0}),G(r)!=="svelte-szj2aa"&&(r.textContent=i),p.forEach(c),this.h()},h(){u(s,"class","svelte-1a9dvbb"),u(r,"class","std btn-reset"),u(e,"class","synopsis svelte-1a9dvbb")},m(f,p){y(f,e,p),m(e,s),m(s,l),m(e,a),m(e,r),b||(d=B(r,"click",n[9]),b=!0)},p(f,p){p&1&&t!==(t=f[0].overview+"")&&oe(l,t)},d(f){f&&c(e),b=!1,d()}}}function De(n){let e,s;return e=new je({props:{show:n[3],$$slots:{default:[et]},$$scope:{ctx:n}}}),e.$on("close",n[10]),{c(){Z(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,l){ee(e,t,l),s=!0},p(t,l){const a={};l&8&&(a.show=t[3]),l&131073&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){P(e.$$.fragment,t),s=!1},d(t){te(e,t)}}}function et(n){let e,s,t,l,a,r,i="Close",b,d;return{c(){e=_("div"),s=_("div"),t=_("iframe"),a=N(),r=_("button"),r.textContent=i,this.h()},l(f){e=v(f,"DIV",{class:!0});var p=C(e);s=v(p,"DIV",{class:!0});var k=C(s);t=v(k,"IFRAME",{class:!0,src:!0,title:!0,frameborder:!0,allow:!0}),C(t).forEach(c),k.forEach(c),a=I(p),r=v(p,"BUTTON",{class:!0,"data-svelte-h":!0}),G(r)!=="svelte-2fwwjr"&&(r.textContent=i),p.forEach(c),this.h()},h(){u(t,"class","youtube-video svelte-1a9dvbb"),ie(t.src,l=`https://www.youtube.com/embed/${n[0].trailer}`)||u(t,"src",l),u(t,"title","Trailer"),u(t,"frameborder","0"),u(t,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),t.allowFullscreen=!0,u(s,"class","trailer-video svelte-1a9dvbb"),u(r,"class","std btn-reset"),u(e,"class","trailer svelte-1a9dvbb")},m(f,p){y(f,e,p),m(e,s),m(s,t),m(e,a),m(e,r),b||(d=B(r,"click",n[10]),b=!0)},p(f,p){p&1&&!ie(t.src,l=`https://www.youtube.com/embed/${f[0].trailer}`)&&u(t,"src",l)},d(f){f&&c(e),b=!1,d()}}}function Ve(n){let e,s,t="Trailer",l,a;return{c(){e=_("span"),s=_("button"),s.textContent=t,this.h()},l(r){e=v(r,"SPAN",{});var i=C(e);s=v(i,"BUTTON",{class:!0,"data-svelte-h":!0}),G(s)!=="svelte-1866a54"&&(s.textContent=t),i.forEach(c),this.h()},h(){u(s,"class","std btn-reset")},m(r,i){y(r,e,i),m(e,s),l||(a=B(s,"click",n[10]),l=!0)},p:ve,d(r){r&&c(e),l=!1,a()}}}function tt(n){let e,s,t,l,a="Synopsis",r,i,b,d=n[0].trailer&&Ve(n);return{c(){e=_("p"),s=_("span"),t=_("span"),l=_("button"),l.textContent=a,r=N(),d&&d.c(),this.h()},l(f){e=v(f,"P",{});var p=C(e);s=v(p,"SPAN",{});var k=C(s);t=v(k,"SPAN",{});var F=C(t);l=v(F,"BUTTON",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-11pu7vg"&&(l.textContent=a),F.forEach(c),r=I(k),d&&d.l(k),k.forEach(c),p.forEach(c),this.h()},h(){u(l,"class","std btn-reset")},m(f,p){y(f,e,p),m(e,s),m(s,t),m(t,l),m(s,r),d&&d.m(s,null),i||(b=B(l,"click",n[9]),i=!0)},p(f,p){f[0].trailer?d?d.p(f,p):(d=Ve(f),d.c(),d.m(s,null)):d&&(d.d(1),d=null)},d(f){f&&c(e),d&&d.d(),i=!1,b()}}}function st(n){let e,s="Remove from saved",t,l;return{c(){e=_("button"),e.textContent=s,this.h()},l(a){e=v(a,"BUTTON",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-pf9c5b"&&(e.textContent=s),this.h()},h(){u(e,"class","std save btn-reset svelte-1a9dvbb")},m(a,r){y(a,e,r),t||(l=B(e,"click",n[13]),t=!0)},p:ve,d(a){a&&c(e),t=!1,l()}}}function lt(n){let e,s="Save this film",t,l;return{c(){e=_("button"),e.textContent=s,this.h()},l(a){e=v(a,"BUTTON",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-118u0we"&&(e.textContent=s),this.h()},h(){u(e,"class","std save btn-reset svelte-1a9dvbb")},m(a,r){y(a,e,r),t||(l=B(e,"click",n[12]),t=!0)},p:ve,d(a){a&&c(e),t=!1,l()}}}function Ue(n){let e,s,t,l;return{c(){e=_("img"),this.h()},l(a){e=v(a,"IMG",{loading:!0,src:!0,alt:!0,class:!0}),this.h()},h(){u(e,"loading","lazy"),ie(e.src,s=Ne(n[0].poster))||u(e,"src",s),u(e,"alt",""),u(e,"class","svelte-1a9dvbb")},m(a,r){y(a,e,r),t||(l=B(e,"load",n[11]),t=!0)},p(a,r){r&1&&!ie(e.src,s=Ne(a[0].poster))&&u(e,"src",s)},d(a){a&&c(e),t=!1,l()}}}function at(n){let e,s,t;return s=new Be({props:{to:"/",$$slots:{default:[rt]},$$scope:{ctx:n}}}),{c(){e=_("div"),Z(s.$$.fragment),this.h()},l(l){e=v(l,"DIV",{class:!0});var a=C(e);x(s.$$.fragment,a),a.forEach(c),this.h()},h(){u(e,"class","next svelte-1a9dvbb")},m(l,a){y(l,e,a),ee(s,e,null),t=!0},p(l,a){const r={};a&131072&&(r.$$scope={dirty:a,ctx:l}),s.$set(r)},i(l){t||(T(s.$$.fragment,l),t=!0)},o(l){P(s.$$.fragment,l),t=!1},d(l){l&&c(e),te(s)}}}function nt(n){let e,s,t;return s=new Be({props:{$$slots:{default:[ot]},$$scope:{ctx:n}}}),s.$on("click",n[16]),{c(){e=_("div"),Z(s.$$.fragment),this.h()},l(l){e=v(l,"DIV",{class:!0});var a=C(e);x(s.$$.fragment,a),a.forEach(c),this.h()},h(){u(e,"class","next svelte-1a9dvbb")},m(l,a){y(l,e,a),ee(s,e,null),t=!0},p(l,a){const r={};a&131136&&(r.$$scope={dirty:a,ctx:l}),s.$set(r)},i(l){t||(T(s.$$.fragment,l),t=!0)},o(l){P(s.$$.fragment,l),t=!1},d(l){l&&c(e),te(s)}}}function rt(n){let e;return{c(){e=J("Find a Film →")},l(s){e=Y(s,"Find a Film →")},m(s,t){y(s,e,t)},d(s){s&&c(e)}}}function ot(n){let e=n[6]===2?"View Films →":"Next Film →",s;return{c(){s=J(e)},l(t){s=Y(t,e)},m(t,l){y(t,s,l)},p(t,l){l&64&&e!==(e=t[6]===2?"View Films →":"Next Film →")&&oe(s,e)},d(t){t&&c(s)}}}function it(n){let e,s,t,l,a,r,i,b,d=n[0].title+"",f,p,k,F,K,q,M=n[0].person+"",L,W,g,$,fe,se,ue,le,ae,R,be="Seen this film",ce,D,V,j,de,ge;pe.title=e=Fe(n[0].title),l=new je({props:{show:n[2],$$slots:{default:[xe]},$$scope:{ctx:n}}}),l.$on("close",n[9]);let w=n[0].trailer&&De(n);F=new Qe({props:{rating:n[0].rating,runtime:n[0].runtime,genre:n[0].genre,release_date:n[0].release_date,providers:n[0].providers,$$slots:{default:[tt]},$$scope:{ctx:n}}});function $e(o,h){return o[7]?st:lt}let ne=$e(n),O=ne(n),E=n[0].poster&&n[5]&&Ue(n);const we=[nt,at],z=[];function ke(o,h){return o[1].started?0:1}return D=ke(n),V=z[D]=we[D](n),{c(){s=N(),t=_("div"),Z(l.$$.fragment),a=N(),w&&w.c(),r=N(),i=_("div"),b=_("h1"),f=J(d),p=N(),k=_("div"),Z(F.$$.fragment),K=N(),q=_("span"),L=J(M),W=N(),g=_("div"),$=_("a"),fe=J("Share"),ue=N(),O.c(),le=N(),E&&E.c(),ae=N(),R=_("button"),R.textContent=be,ce=N(),V.c(),this.h()},l(o){Le("svelte-1f905iy",pe.head).forEach(c),s=I(o),t=v(o,"DIV",{class:!0});var U=C(t);x(l.$$.fragment,U),a=I(U),w&&w.l(U),r=I(U),i=v(U,"DIV",{class:!0});var S=C(i);b=v(S,"H1",{class:!0});var H=C(b);f=Y(H,d),H.forEach(c),p=I(S),k=v(S,"DIV",{class:!0});var Ce=C(k);x(F.$$.fragment,Ce),Ce.forEach(c),K=I(S),q=v(S,"SPAN",{class:!0});var Ee=C(q);L=Y(Ee,M),Ee.forEach(c),S.forEach(c),W=I(U),g=v(U,"DIV",{class:!0});var A=C(g);$=v(A,"A",{href:!0,target:!0,class:!0});var Se=C($);fe=Y(Se,"Share"),Se.forEach(c),ue=I(A),O.l(A),le=I(A),E&&E.l(A),ae=I(A),R=v(A,"BUTTON",{class:!0,"data-svelte-h":!0}),G(R)!=="svelte-qi23jo"&&(R.textContent=be),ce=I(A),V.l(A),A.forEach(c),U.forEach(c),this.h()},h(){u(b,"class","headline content-top svelte-1a9dvbb"),u(k,"class","content-middle svelte-1a9dvbb"),u(q,"class","headline content-bottom svelte-1a9dvbb"),u(i,"class","page-left content svelte-1a9dvbb"),u($,"href",se=`mailto:?subject=Check out this film ${n[0].title}&body=${n[8].url.href}`),u($,"target","_blank"),u($,"class","std share svelte-1a9dvbb"),u(R,"class","std seen btn-reset svelte-1a9dvbb"),u(g,"class","page-right svelte-1a9dvbb"),re(g,"loaded",n[4]),u(t,"class","page svelte-1a9dvbb")},m(o,h){y(o,s,h),y(o,t,h),ee(l,t,null),m(t,a),w&&w.m(t,null),m(t,r),m(t,i),m(i,b),m(b,f),m(i,p),m(i,k),ee(F,k,null),m(i,K),m(i,q),m(q,L),m(t,W),m(t,g),m(g,$),m($,fe),m(g,ue),O.m(g,null),m(g,le),E&&E.m(g,null),m(g,ae),m(g,R),m(g,ce),z[D].m(g,null),j=!0,de||(ge=[B($,"click",n[15]),B(R,"click",n[14])],de=!0)},p(o,[h]){(!j||h&1)&&e!==(e=Fe(o[0].title))&&(pe.title=e);const U={};h&4&&(U.show=o[2]),h&131073&&(U.$$scope={dirty:h,ctx:o}),l.$set(U),o[0].trailer?w?(w.p(o,h),h&1&&T(w,1)):(w=De(o),w.c(),T(w,1),w.m(t,r)):w&&(he(),P(w,1,1,()=>{w=null}),_e()),(!j||h&1)&&d!==(d=o[0].title+"")&&oe(f,d);const S={};h&1&&(S.rating=o[0].rating),h&1&&(S.runtime=o[0].runtime),h&1&&(S.genre=o[0].genre),h&1&&(S.release_date=o[0].release_date),h&1&&(S.providers=o[0].providers),h&131073&&(S.$$scope={dirty:h,ctx:o}),F.$set(S),(!j||h&1)&&M!==(M=o[0].person+"")&&oe(L,M),(!j||h&257&&se!==(se=`mailto:?subject=Check out this film ${o[0].title}&body=${o[8].url.href}`))&&u($,"href",se),ne===(ne=$e(o))&&O?O.p(o,h):(O.d(1),O=ne(o),O&&(O.c(),O.m(g,le))),o[0].poster&&o[5]?E?E.p(o,h):(E=Ue(o),E.c(),E.m(g,ae)):E&&(E.d(1),E=null);let H=D;D=ke(o),D===H?z[D].p(o,h):(he(),P(z[H],1,1,()=>{z[H]=null}),_e(),V=z[D],V?V.p(o,h):(V=z[D]=we[D](o),V.c()),T(V,1),V.m(g,null)),(!j||h&16)&&re(g,"loaded",o[4])},i(o){j||(T(l.$$.fragment,o),T(w),T(F.$$.fragment,o),T(V),j=!0)},o(o){P(l.$$.fragment,o),P(w),P(F.$$.fragment,o),P(V),j=!1},d(o){o&&(c(s),c(t)),te(l),w&&w.d(),te(F),O.d(),E&&E.d(),z[D].d(),de=!1,We(ge)}}}function ft(n,e,s){let t,l,a;Te(n,X,$=>s(1,l=$)),Te(n,Ye,$=>s(8,a=$));let{data:r}=e,i=!1,b=!1,d=!1,f=!1;function p(){s(2,i=!i),i&&Q("User",{props:{action:"Viewed Synopsis"}})}function k(){s(3,b=!b),b&&Q("User",{props:{action:"Watched trailer"}})}function F(){s(4,d=!0)}async function K(){Q("User",{props:{action:"Saved film",title:r.title}}),me.add(`Saved ${r.title} to your list`,{delay:2e3}),await X.saveFilm(r)}async function q(){Q("User",{props:{action:"Removed film"}}),me.add("Removed from your list",{delay:2e3}),await X.removeWantFilm(r.id)}async function M(){await X.skipFilm(r),me.add("You won't see this film again",{delay:2e3}),l.started&&ye("/next")}async function L($){Q("User",{props:{action:"Share"}}),"share"in navigator&&($.preventDefault(),navigator.share({title:document.title,text:"Check out this great film",url:window.location.href}))}let W=0;He(()=>{s(5,f=!0),s(6,W=l.films.length)});async function g(){await X.storeFilm(r),ye("/next")}return n.$$set=$=>{"data"in $&&s(0,r=$.data)},n.$$.update=()=>{n.$$.dirty&3&&s(7,t=l.want.some($=>$.id===r.id))},[r,l,i,b,d,f,W,t,a,p,k,F,K,q,M,L,g]}class $t extends Oe{constructor(e){super(),Ae(this,e,ft,it,Pe,{data:0})}}export{$t as component};
