import{v as we,e as be,a as Ge,T as w,p as Ue,g as oe}from"../chunks/utils.IImh6JCv.js";import{s as ue,q as ye,e as k,a as B,c as T,b as R,h as j,f as _,j as h,w as H,l as V,m,y as Se,z as Pe,A as Ve,t as q,d as J,n as ie,x as M,D as X,E as Z,r as Ae,N as Fe,K as $,G as Le,O as ve,P as x,o as Me,C as Ye,p as Ee}from"../chunks/scheduler.vwrL6P9E.js";import{S as fe,i as ce,a as y,h as ae,t as G,e as re,j as ee,c as te,b as le,m as se,d as ne}from"../chunks/index.kO2rGTCX.js";import{a as qe,g as Je}from"../chunks/entry.ZZZaYNO6.js";import{p as He}from"../chunks/stores.UnOZXRw9.js";import{e as ke,u as Ke,d as Qe}from"../chunks/each.ug4NFR6d.js";import{s as We}from"../chunks/journey.NYZhiPzo.js";async function Xe({url:s,fetch:e}){const{people:t,genres:l}=await e("/.netlify/functions/config").then(o=>o.json());return{type:we(s.searchParams.get("type")),people:t.map(o=>({id:o.id,text:o.name})),genres:l.map(o=>({id:o.id,text:o.name}))}}const mt=Object.freeze(Object.defineProperty({__proto__:null,load:Xe},Symbol.toStringTag,{value:"Module"}));function Te(s,e,t){const l=s.slice();return l[6]=e[t],l}const Ze=s=>({}),Ce=s=>({});function Ie(s){let e,t,l;const o=s[5].title,r=ye(o,s,s[4],Ce);return{c(){e=k("span"),t=q(s[2]),r&&r.c(),this.h()},l(u){e=T(u,"SPAN",{class:!0});var i=R(e);t=J(i,s[2]),r&&r.l(i),i.forEach(_),this.h()},h(){h(e,"class","title svelte-10y9pau")},m(u,i){V(u,e,i),m(e,t),r&&r.m(e,null),l=!0},p(u,i){(!l||i&4)&&ie(t,u[2]),r&&r.p&&(!l||i&16)&&Se(r,o,u,u[4],l?Ve(o,u[4],i,Ze):Pe(u[4]),Ce)},i(u){l||(y(r,u),l=!0)},o(u){G(r,u),l=!1},d(u){u&&_(e),r&&r.d(u)}}}function Re(s,e){let t,l=e[6].text+"",o,r,u,i;return{key:s,first:null,c(){t=k("button"),o=q(l),this.h()},l(n){t=T(n,"BUTTON",{class:!0,type:!0,"data-id":!0});var a=R(t);o=J(a,l),a.forEach(_),this.h()},h(){h(t,"class","btn-reset items-item headline svelte-10y9pau"),h(t,"type","button"),h(t,"data-id",r=e[6].id),H(t,"selected",e[0].includes(e[6].id)),this.first=t},m(n,a){V(n,t,a),m(t,o),u||(i=M(t,"click",e[3]),u=!0)},p(n,a){e=n,a&2&&l!==(l=e[6].text+"")&&ie(o,l),a&2&&r!==(r=e[6].id)&&h(t,"data-id",r),a&3&&H(t,"selected",e[0].includes(e[6].id))},d(n){n&&_(t),u=!1,i()}}}function ze(s){let e,t="No items";return{c(){e=k("span"),e.textContent=t,this.h()},l(l){e=T(l,"SPAN",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-169st33"&&(e.textContent=t),this.h()},h(){h(e,"class","empty svelte-10y9pau")},m(l,o){V(l,e,o)},d(l){l&&_(e)}}}function $e(s){let e,t,l=[],o=new Map,r,u,i,n=s[2]&&Ie(s),a=ke(s[1]);const I=f=>f[6].id;for(let f=0;f<a.length;f+=1){let d=Te(s,a,f),v=I(d);o.set(v,l[f]=Re(v,d))}let c=s[1].length===0&&ze();const z=s[5].default,b=ye(z,s,s[4],null);return{c(){e=k("div"),n&&n.c(),t=B();for(let f=0;f<l.length;f+=1)l[f].c();r=B(),c&&c.c(),u=B(),b&&b.c(),this.h()},l(f){e=T(f,"DIV",{class:!0});var d=R(e);n&&n.l(d),t=j(d);for(let v=0;v<l.length;v+=1)l[v].l(d);r=j(d),c&&c.l(d),u=j(d),b&&b.l(d),d.forEach(_),this.h()},h(){h(e,"class","items svelte-10y9pau"),H(e,"withTitle",!!s[2])},m(f,d){V(f,e,d),n&&n.m(e,null),m(e,t);for(let v=0;v<l.length;v+=1)l[v]&&l[v].m(e,null);m(e,r),c&&c.m(e,null),m(e,u),b&&b.m(e,null),i=!0},p(f,[d]){f[2]?n?(n.p(f,d),d&4&&y(n,1)):(n=Ie(f),n.c(),y(n,1),n.m(e,t)):n&&(ae(),G(n,1,1,()=>{n=null}),re()),d&11&&(a=ke(f[1]),l=Ke(l,d,I,1,f,a,o,e,Qe,Re,r,Te)),f[1].length===0?c||(c=ze(),c.c(),c.m(e,u)):c&&(c.d(1),c=null),b&&b.p&&(!i||d&16)&&Se(b,z,f,f[4],i?Ve(z,f[4],d,null):Pe(f[4]),null),(!i||d&4)&&H(e,"withTitle",!!f[2])},i(f){i||(y(n),y(b,f),i=!0)},o(f){G(n),G(b,f),i=!1},d(f){f&&_(e),n&&n.d();for(let d=0;d<l.length;d+=1)l[d].d();c&&c.d(),b&&b.d(f)}}}function xe(s,e,t){let{$$slots:l={},$$scope:o}=e,{items:r}=e,{selected:u=[]}=e,{title:i=null}=e;function n(a){const I=parseInt(a.target.dataset.id),c=u.slice();c.includes(I)?c.splice(c.indexOf(I),1):c.push(I),t(0,u=c)}return s.$$set=a=>{"items"in a&&t(1,r=a.items),"selected"in a&&t(0,u=a.selected),"title"in a&&t(2,i=a.title),"$$scope"in a&&t(4,o=a.$$scope)},[u,r,i,n,o,l]}class de extends fe{constructor(e){super(),ce(this,e,xe,$e,ue,{items:1,selected:0,title:2})}}function et(s){let e,t,l,o,r=s[0].length+"",u,i,n,a,I,c,z,b,f;return{c(){e=k("div"),t=k("div"),l=k("div"),o=k("span"),u=q(r),i=q(" Selected"),n=B(),a=k("button"),I=B(),c=k("button"),z=q("Find a film →"),this.h()},l(d){e=T(d,"DIV",{class:!0});var v=R(e);t=T(v,"DIV",{class:!0});var S=R(t);l=T(S,"DIV",{class:!0});var P=R(l);o=T(P,"SPAN",{class:!0});var N=R(o);u=J(N,r),i=J(N," Selected"),N.forEach(_),n=j(P),a=T(P,"BUTTON",{class:!0}),R(a).forEach(_),P.forEach(_),I=j(S),c=T(S,"BUTTON",{class:!0});var F=R(c);z=J(F,"Find a film →"),F.forEach(_),S.forEach(_),v.forEach(_),this.h()},h(){h(o,"class","svelte-1v5ku4h"),h(a,"class","btn-reset clear svelte-1v5ku4h"),h(l,"class","pill-left svelte-1v5ku4h"),c.disabled=s[1],h(c,"class","pill-right btn-reset svelte-1v5ku4h"),H(c,"disabled",s[1]),h(t,"class","pill svelte-1v5ku4h"),h(e,"class","pill-wrapper svelte-1v5ku4h")},m(d,v){V(d,e,v),m(e,t),m(t,l),m(l,o),m(o,u),m(o,i),m(l,n),m(l,a),m(t,I),m(t,c),m(c,z),b||(f=[M(a,"click",s[2]),M(c,"click",s[3])],b=!0)},p(d,[v]){v&1&&r!==(r=d[0].length+"")&&ie(u,r),v&2&&(c.disabled=d[1]),v&2&&H(c,"disabled",d[1])},i:Z,o:Z,d(d){d&&_(e),b=!1,Ae(f)}}}function tt(s,e,t){let{disabled:l=!1}=e;const o=Fe();let{selected:r=[]}=e;function u(){t(0,r=[])}function i(){o("start")}return s.$$set=n=>{"disabled"in n&&t(1,l=n.disabled),"selected"in n&&t(0,r=n.selected)},[r,l,u,i]}class lt extends fe{constructor(e){super(),ce(this,e,tt,et,ue,{disabled:1,selected:0})}}function De(s){let e,t,l,o;function r(i){s[14](i)}let u={title:"Your last choice",items:s[8](s[6],s[4]),$$slots:{title:[st]},$$scope:{ctx:s}};return s[2]!==void 0&&(u.selected=s[2]),t=new de({props:u}),$.push(()=>ee(t,"selected",r)),{c(){e=k("div"),te(t.$$.fragment),this.h()},l(i){e=T(i,"DIV",{class:!0});var n=R(e);le(t.$$.fragment,n),n.forEach(_),this.h()},h(){h(e,"class","pool svelte-183zozn")},m(i,n){V(i,e,n),se(t,e,null),o=!0},p(i,n){const a={};n&80&&(a.items=i[8](i[6],i[4])),n&4194320&&(a.$$scope={dirty:n,ctx:i}),!l&&n&4&&(l=!0,a.selected=i[2],x(()=>l=!1)),t.$set(a)},i(i){o||(y(t.$$.fragment,i),o=!0)},o(i){G(t.$$.fragment,i),o=!1},d(i){i&&_(e),ne(t)}}}function st(s){let e,t="Apply again",l,o;return{c(){e=k("button"),e.textContent=t,this.h()},l(r){e=T(r,"BUTTON",{slot:!0,class:!0,"data-svelte-h":!0}),X(e)!=="svelte-13mrysi"&&(e.textContent=t),this.h()},h(){h(e,"slot","title"),h(e,"class","btn-reset std")},m(r,u){V(r,e,u),l||(o=M(e,"click",s[13]),l=!0)},p:Z,d(r){r&&_(e),l=!1,o()}}}function Ne(s){let e,t,l,o;function r(i){s[16](i)}let u={title:"Your last choice",items:s[8](s[6],s[3]),$$slots:{title:[nt]},$$scope:{ctx:s}};return s[2]!==void 0&&(u.selected=s[2]),t=new de({props:u}),$.push(()=>ee(t,"selected",r)),{c(){e=k("div"),te(t.$$.fragment),this.h()},l(i){e=T(i,"DIV",{class:!0});var n=R(e);le(t.$$.fragment,n),n.forEach(_),this.h()},h(){h(e,"class","pool svelte-183zozn")},m(i,n){V(i,e,n),se(t,e,null),o=!0},p(i,n){const a={};n&72&&(a.items=i[8](i[6],i[3])),n&4194312&&(a.$$scope={dirty:n,ctx:i}),!l&&n&4&&(l=!0,a.selected=i[2],x(()=>l=!1)),t.$set(a)},i(i){o||(y(t.$$.fragment,i),o=!0)},o(i){G(t.$$.fragment,i),o=!1},d(i){i&&_(e),ne(t)}}}function nt(s){let e,t="Apply again",l,o;return{c(){e=k("button"),e.textContent=t,this.h()},l(r){e=T(r,"BUTTON",{slot:!0,class:!0,"data-svelte-h":!0}),X(e)!=="svelte-19kyv97"&&(e.textContent=t),this.h()},h(){h(e,"slot","title"),h(e,"class","btn-reset std")},m(r,u){V(r,e,u),l||(o=M(e,"click",s[15]),l=!0)},p:Z,d(r){r&&_(e),l=!1,o()}}}function Oe(s){let e,t="Missing someone?";return{c(){e=k("a"),e.textContent=t,this.h()},l(l){e=T(l,"A",{href:!0,class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1iw0iv8"&&(e.textContent=t),this.h()},h(){h(e,"href","mailto:hi+films@jthaw.me?subject=Add a director"),h(e,"class","missing headline svelte-183zozn")},m(l,o){V(l,e,o)},d(l){l&&_(e)}}}function it(s){let e,t=s[1]===w.DIRECTOR&&Oe();return{c(){t&&t.c(),e=Ee()},l(l){t&&t.l(l),e=Ee()},m(l,o){t&&t.m(l,o),V(l,e,o)},p(l,o){l[1]===w.DIRECTOR?t||(t=Oe(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){l&&_(e),t&&t.d(l)}}}function ot(s){let e,t,l,o,r,u=be[s[1]]+"",i,n,a,I="Switch",c,z,b,f,d,v,S,P,N,F,K,A,Q,Y,E,U;document.title=Ge("Filter");let g=s[1]===w.DIRECTOR&&s[4]&&De(s),C=s[1]===w.GENRE&&s[3]&&Ne(s);function Be(p){s[17](p)}let pe={items:s[5],$$slots:{default:[it]},$$scope:{ctx:s}};s[2]!==void 0&&(pe.selected=s[2]),N=new de({props:pe}),$.push(()=>ee(N,"selected",Be));function je(p){s[18](p)}let he={disabled:s[2].length===0};return s[2]!==void 0&&(he.selected=s[2]),A=new lt({props:he}),$.push(()=>ee(A,"selected",je)),A.$on("start",s[9]),{c(){e=B(),t=k("div"),l=k("header"),o=k("div"),r=q("Choosing by "),i=q(u),n=B(),a=k("button"),a.textContent=I,c=B(),z=k("div"),b=k("form"),f=k("input"),d=B(),g&&g.c(),v=B(),C&&C.c(),S=B(),P=k("div"),te(N.$$.fragment),K=B(),te(A.$$.fragment),this.h()},l(p){Le("svelte-14l8eji",document.head).forEach(_),e=j(p),t=T(p,"DIV",{class:!0});var O=R(t);l=T(O,"HEADER",{class:!0});var L=R(l);o=T(L,"DIV",{class:!0});var W=R(o);r=J(W,"Choosing by "),i=J(W,u),n=j(W),a=T(W,"BUTTON",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-1f6qhz1"&&(a.textContent=I),W.forEach(_),c=j(L),z=T(L,"DIV",{class:!0});var _e=R(z);b=T(_e,"FORM",{class:!0});var me=R(b);f=T(me,"INPUT",{type:!0,placeholder:!0,class:!0}),me.forEach(_),_e.forEach(_),L.forEach(_),d=j(O),g&&g.l(O),v=j(O),C&&C.l(O),S=j(O),P=T(O,"DIV",{class:!0});var ge=R(P);le(N.$$.fragment,ge),ge.forEach(_),K=j(O),le(A.$$.fragment,O),O.forEach(_),this.h()},h(){h(a,"class","btn-reset svelte-183zozn"),h(o,"class","left svelte-183zozn"),h(f,"type","search"),h(f,"placeholder","Search..."),h(f,"class","svelte-183zozn"),h(b,"class","search svelte-183zozn"),h(z,"class","right"),h(l,"class","svelte-183zozn"),h(P,"class","pool pool--full svelte-183zozn"),h(t,"class","wrapper svelte-183zozn")},m(p,D){V(p,e,D),V(p,t,D),m(t,l),m(l,o),m(o,r),m(o,i),m(o,n),m(o,a),m(l,c),m(l,z),m(z,b),m(b,f),ve(f,s[0]),m(t,d),g&&g.m(t,null),m(t,v),C&&C.m(t,null),m(t,S),m(t,P),se(N,P,null),m(t,K),se(A,t,null),Y=!0,E||(U=[M(a,"click",s[7]),M(f,"input",s[12]),M(b,"submit",at)],E=!0)},p(p,[D]){(!Y||D&2)&&u!==(u=be[p[1]]+"")&&ie(i,u),D&1&&f.value!==p[0]&&ve(f,p[0]),p[1]===w.DIRECTOR&&p[4]?g?(g.p(p,D),D&18&&y(g,1)):(g=De(p),g.c(),y(g,1),g.m(t,v)):g&&(ae(),G(g,1,1,()=>{g=null}),re()),p[1]===w.GENRE&&p[3]?C?(C.p(p,D),D&10&&y(C,1)):(C=Ne(p),C.c(),y(C,1),C.m(t,S)):C&&(ae(),G(C,1,1,()=>{C=null}),re());const O={};D&32&&(O.items=p[5]),D&4194306&&(O.$$scope={dirty:D,ctx:p}),!F&&D&4&&(F=!0,O.selected=p[2],x(()=>F=!1)),N.$set(O);const L={};D&4&&(L.disabled=p[2].length===0),!Q&&D&4&&(Q=!0,L.selected=p[2],x(()=>Q=!1)),A.$set(L)},i(p){Y||(y(g),y(C),y(N.$$.fragment,p),y(A.$$.fragment,p),Y=!0)},o(p){G(g),G(C),G(N.$$.fragment,p),G(A.$$.fragment,p),Y=!1},d(p){p&&(_(e),_(t)),g&&g.d(),C&&C.d(),ne(N),ne(A),E=!1,Ae(U)}}}function at(){}function rt(s,e,t){let l,o,r;Me(s,He,E=>t(19,r=E));let{data:u}=e,i="",n=[],a=u.type,I=null,c=null;function z(){a===w.GENRE?t(1,a=w.DIRECTOR):a===w.DIRECTOR&&t(1,a=w.GENRE),t(2,n=[]),t(0,i="")}function b(E,U){const g=(()=>{switch(E){case w.DIRECTOR:return u.people;case w.GENRE:default:return u.genres}})();return U?g.filter(C=>C.text.toLowerCase().includes(U.toLowerCase())):g}function f(E,U){return E.filter(g=>U.includes(g.id))}async function d(){const E={genres:a===w.DIRECTOR?[]:[...n],people:a===w.DIRECTOR?[...n]:[]};Ue("type",a),await We.begin(E.genres,E.people),Je("/next")}function v(){r.url.searchParams.get("type")||t(1,a=we(oe("type",w.GENRE)));const E=oe("genres",null,g=>JSON.parse(g)),U=oe("people",null,g=>JSON.parse(g));t(3,I=E),t(4,c=U)}function S(E){t(2,n=[...E])}qe(()=>{v()}),Ye(()=>{v()});function P(){i=this.value,t(0,i)}const N=()=>S(c);function F(E){n=E,t(2,n)}const K=()=>S(I);function A(E){n=E,t(2,n)}function Q(E){n=E,t(2,n)}function Y(E){n=E,t(2,n)}return s.$$set=E=>{"data"in E&&t(11,u=E.data)},s.$$.update=()=>{s.$$.dirty&2&&t(6,l=b(a,"")),s.$$.dirty&3&&t(5,o=b(a,i))},[i,a,n,I,c,o,l,z,f,d,S,u,P,N,F,K,A,Q,Y]}class gt extends fe{constructor(e){super(),ce(this,e,rt,ot,ue,{data:11})}}export{gt as component,mt as universal};
