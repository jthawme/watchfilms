import{p as n}from"./utils.IImh6JCv.js";import{d as l,w as p}from"./entry.ZZZaYNO6.js";import{g as r}from"./scheduler.vwrL6P9E.js";const f={started:!1,genres:[],people:[],avoid:[],want:[],films:[]},s=p(f),e={...s,update(t,i){return new Promise(a=>{s.update(d=>({...d,[t]:i})),a()})},async begin(t=[],i=[]){return new Promise(a=>{s.update(d=>({...d,genres:t,people:i,started:!0,films:[]})),t.length&&n("genres",JSON.stringify(t)),i.length&&n("people",JSON.stringify(i)),a()})},storeFilm(t){const i=r(e).films;return i.some(a=>a.id===t.id)?Promise.resolve():e.update("films",[...i,t])},loadAvoid(t){e.update("avoid",t)},loadWant(t){e.update("want",t)},skipFilm(t){return e.update("avoid",[...r(e).avoid,{id:t.id,title:t.title,backdrop:t.backdrop}])},removeFilm(t){const i=[...r(e).avoid];return i.splice(i.findIndex(a=>a.id===t),1),e.update("avoid",i)},saveFilm(t){return e.update("want",[...r(e).want,{id:t.id,title:t.title,backdrop:t.backdrop}])},removeWantFilm(t){const i=[...r(e).want];return i.splice(i.findIndex(a=>a.id===t),1),e.update("want",i)}},c=l([e],([t])=>t.avoid);let o=[];c.subscribe(t=>{JSON.stringify(o)!==JSON.stringify(t)&&n("avoid",JSON.stringify(t)),o=t});const v=l([e],([t])=>t.want);let u=[];v.subscribe(t=>{JSON.stringify(u)!==JSON.stringify(t)&&n("want",JSON.stringify(t)),u=t});export{e as s};
